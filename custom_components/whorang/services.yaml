# Services for WhoRang AI Doorbell integration

trigger_analysis:
  name: Trigger AI Analysis
  description: Trigger AI analysis for a visitor (latest if no visitor_id specified)
  fields:
    visitor_id:
      name: Visitor ID
      description: ID of the visitor to analyze (optional, uses latest if not specified)
      example: "abc123-def456-ghi789"
      selector:
        text:

add_known_visitor:
  name: Add Known Visitor
  description: Add a new known person for face recognition
  fields:
    name:
      name: Name
      description: Name of the person
      required: true
      example: "John Doe"
      selector:
        text:
    notes:
      name: Notes
      description: Optional notes about the person
      example: "Neighbor from next door"
      selector:
        text:
          multiline: true

remove_known_visitor:
  name: Remove Known Visitor
  description: Remove a known person from face recognition
  fields:
    person_id:
      name: Person ID
      description: ID of the person to remove
      required: true
      example: 1
      selector:
        number:
          min: 1
          mode: box

set_ai_provider:
  name: Set AI Provider
  description: Change the active AI provider for face recognition
  fields:
    provider:
      name: Provider
      description: AI provider to use
      required: true
      example: "openai"
      selector:
        select:
          options:
            - "openai"
            - "local"
            - "claude"
            - "gemini"
            - "google-cloud-vision"

export_data:
  name: Export Visitor Data
  description: Export visitor data in specified format
  fields:
    start_date:
      name: Start Date
      description: Start date for export (ISO format)
      example: "2024-01-01T00:00:00Z"
      selector:
        datetime:
    end_date:
      name: End Date
      description: End date for export (ISO format)
      example: "2024-12-31T23:59:59Z"
      selector:
        datetime:
    format:
      name: Format
      description: Export format
      default: "json"
      example: "json"
      selector:
        select:
          options:
            - "json"
            - "csv"

test_webhook:
  name: Test Webhook
  description: Test webhook functionality by sending a test event

set_ai_model:
  name: Set AI Model
  description: Set the AI model for the current provider
  fields:
    model:
      name: Model
      description: Model name to set
      required: true
      example: "gpt-4o"
      selector:
        text:

get_available_models:
  name: Get Available Models
  description: Get list of available models for current or specified provider
  fields:
    provider:
      name: Provider
      description: AI provider to get models for (optional)
      required: false
      example: "openai"
      selector:
        select:
          options:
            - "local"
            - "openai"
            - "claude"
            - "gemini"
            - "google-cloud-vision"

refresh_ollama_models:
  name: Refresh Ollama Models
  description: Refresh the list of available Ollama models from the local instance

test_ollama_connection:
  name: Test Ollama Connection
  description: Test connection to the Ollama service and get status information

process_doorbell_event:
  name: Process Doorbell Event
  description: Process a complete doorbell event with image and context data (replaces rest_command.doorbell_webhook)
  fields:
    image_url:
      name: Image URL
      description: URL of the doorbell snapshot image
      required: true
      example: "http://192.168.86.162:8123/local/doorbell_snapshot_1749552024.jpg"
      selector:
        text:
    ai_message:
      name: AI Message
      description: AI analysis message
      required: false
      example: "A person is standing at the front door"
      selector:
        text:
          multiline: true
    ai_title:
      name: AI Title
      description: AI analysis title
      required: false
      example: "Visitor Detected"
      selector:
        text:
    location:
      name: Location
      description: Location where the event occurred
      required: false
      default: "front_door"
      example: "front_door"
      selector:
        text:
    weather_temp:
      name: Weather Temperature
      description: Current temperature
      required: false
      example: 20
      selector:
        number:
          min: -50
          max: 50
          unit_of_measurement: "Â°C"
    weather_humidity:
      name: Weather Humidity
      description: Current humidity percentage
      required: false
      example: 50
      selector:
        number:
          min: 0
          max: 100
          unit_of_measurement: "%"
    weather_condition:
      name: Weather Condition
      description: Current weather condition
      required: false
      example: "clear"
      selector:
        text:
    wind_speed:
      name: Wind Speed
      description: Current wind speed
      required: false
      example: 5
      selector:
        number:
          min: 0
          max: 200
          unit_of_measurement: "km/h"
    pressure:
      name: Pressure
      description: Current atmospheric pressure
      required: false
      example: 1013
      selector:
        number:
          min: 800
          max: 1200
          unit_of_measurement: "hPa"
